diff --git a/lib/alg-yescrypt-opt.c b/lib/alg-yescrypt-opt.c
index a33c6e402757..f5146f678dd3 100644
--- a/lib/alg-yescrypt-opt.c
+++ b/lib/alg-yescrypt-opt.c
@@ -30,6 +30,9 @@
 
 #include "crypt-port.h"
 
+#undef __SSE2__
+#undef __SSE__
+
 #if INCLUDE_yescrypt || INCLUDE_scrypt || INCLUDE_gost_yescrypt
 
 #pragma GCC diagnostic ignored "-Wcast-align"
