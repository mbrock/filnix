diff --git a/library/pids.c b/library/pids.c
index 6ae94adbff75..d3d3a769d3e6 100644
--- a/library/pids.c
+++ b/library/pids.c
@@ -1027,12 +1027,12 @@ static inline int pids_oldproc_open (
         ...)
 {
     va_list vl;
-    int *ids;
+    int *ids = NULL;
     int num = 0;
 
     if (*this == NULL) {
         va_start(vl, flags);
-        ids = va_arg(vl, int*);
+        if (flags & (PROC_PID | PROC_UID)) ids = va_arg(vl, int*);
         if (flags & PROC_UID) num = va_arg(vl, int);
         va_end(vl);
         if (NULL == (*this = openproc(flags, ids, num)))
